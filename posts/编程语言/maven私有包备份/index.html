<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Maven私有包备份 | luanrz's blog</title><meta name=keywords content="Java,Maven"><meta name=description content='一、修改Maven配置文件
为支持混合加载远程与本地包，需在maven配置文件中分别指定远程和本地地址：

远程：https://maven.aliyun.com/repository/central
本地：file://${HOME}/.m2/repository_backup

vim ~/.m2/settings.xml
<?xml version="1.0" encoding="UTF-8"?>
<settings>
    <profiles>
        <profile>
            <id>m2-mix-remote-local</id>
            <repositories>
                <repository>
                    <id>m2-remote</id>
                    <url>https://maven.aliyun.com/repository/central</url>
                </repository>
                <repository>
                    <id>m2-local</id>
                    <url>file://${HOME}/.m2/repository_backup</url>
                </repository>
            </repositories>
            <pluginRepositories>
                <pluginRepository>
                    <id>m2-remote</id>
                    <url>https://maven.aliyun.com/repository/central</url>
                </pluginRepository>
                <pluginRepository>
                    <id>m2-local</id>
                    <url>file://${HOME}/.m2/repository_backup</url>
                </pluginRepository>            
            </pluginRepositories>
        </profile>
    </profiles>
    <activeProfiles>
        <activeProfile>m2-mix-remote-local</activeProfile>
    </activeProfiles>
</settings>
二、收集本地依赖包
（1）重命名原来的maven本地仓库，后续将从该目录下提取无法从公网下载的依赖包。'><meta name=author content><link rel=canonical href=https://luanrz.github.io/posts/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/maven%E7%A7%81%E6%9C%89%E5%8C%85%E5%A4%87%E4%BB%BD/><link crossorigin=anonymous href=/assets/css/stylesheet.ed6c30fee125be816b653632a2732f92313b593583d98576c9eb2bf33a42b6e1.css integrity="sha256-7Www/uElvoFrZTYyonMvkjE7WTWD2YV2yesr8zpCtuE=" rel="preload stylesheet" as=style><link rel=icon href=https://luanrz.github.io/images/icon.jpg><link rel=icon type=image/png sizes=16x16 href=https://luanrz.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://luanrz.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://luanrz.github.io/apple-touch-icon.png><link rel=mask-icon href=https://luanrz.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://luanrz.github.io/posts/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/maven%E7%A7%81%E6%9C%89%E5%8C%85%E5%A4%87%E4%BB%BD/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script>const loadScript=(e,t)=>{var n=document.createElement("script");n.onerror=e=>{throw new URIError("The script "+e.target.src+" didn't load correctly.")},t&&(n.onload=t),document.head.insertAdjacentElement("beforeend",n),n.src=e},loadPlantUMLOnNeed=()=>{let e="language-plantuml";document.querySelectorAll("[class^="+e+"]").length>0&&loadScript("https://fastly.jsdelivr.net/gh/jmnote/plantuml-encoder@1.2.4/dist/plantuml-encoder.min.js",()=>{(function(){Array.prototype.forEach.call(document.querySelectorAll("[class^="+e+"]"),function(e){let t=document.createElement("IMG");t.loading="lazy",t.src="http://www.plantuml.com/plantuml/svg/~1"+plantumlEncoder.encode(e.innerText),e.parentNode.insertBefore(t,e),e.style.display="none"})})(),console.log("PlantUML init done")})};window.addEventListener("load",function(){loadPlantUMLOnNeed()})</script><meta property="og:url" content="https://luanrz.github.io/posts/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/maven%E7%A7%81%E6%9C%89%E5%8C%85%E5%A4%87%E4%BB%BD/"><meta property="og:site_name" content="luanrz's blog"><meta property="og:title" content="Maven私有包备份"><meta property="og:description" content='一、修改Maven配置文件 为支持混合加载远程与本地包，需在maven配置文件中分别指定远程和本地地址：
远程：https://maven.aliyun.com/repository/central 本地：file://${HOME}/.m2/repository_backup vim ~/.m2/settings.xml <?xml version="1.0" encoding="UTF-8"?> <settings> <profiles> <profile> <id>m2-mix-remote-local</id> <repositories> <repository> <id>m2-remote</id> <url>https://maven.aliyun.com/repository/central</url> </repository> <repository> <id>m2-local</id> <url>file://${HOME}/.m2/repository_backup</url> </repository> </repositories> <pluginRepositories> <pluginRepository> <id>m2-remote</id> <url>https://maven.aliyun.com/repository/central</url> </pluginRepository> <pluginRepository> <id>m2-local</id> <url>file://${HOME}/.m2/repository_backup</url> </pluginRepository> </pluginRepositories> </profile> </profiles> <activeProfiles> <activeProfile>m2-mix-remote-local</activeProfile> </activeProfiles> </settings> 二、收集本地依赖包 （1）重命名原来的maven本地仓库，后续将从该目录下提取无法从公网下载的依赖包。'><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-03-27T17:47:08+08:00"><meta property="article:modified_time" content="2025-03-27T17:47:08+08:00"><meta property="article:tag" content="Java"><meta property="article:tag" content="Maven"><meta name=twitter:card content="summary"><meta name=twitter:title content="Maven私有包备份"><meta name=twitter:description content='一、修改Maven配置文件
为支持混合加载远程与本地包，需在maven配置文件中分别指定远程和本地地址：

远程：https://maven.aliyun.com/repository/central
本地：file://${HOME}/.m2/repository_backup

vim ~/.m2/settings.xml
<?xml version="1.0" encoding="UTF-8"?>
<settings>
    <profiles>
        <profile>
            <id>m2-mix-remote-local</id>
            <repositories>
                <repository>
                    <id>m2-remote</id>
                    <url>https://maven.aliyun.com/repository/central</url>
                </repository>
                <repository>
                    <id>m2-local</id>
                    <url>file://${HOME}/.m2/repository_backup</url>
                </repository>
            </repositories>
            <pluginRepositories>
                <pluginRepository>
                    <id>m2-remote</id>
                    <url>https://maven.aliyun.com/repository/central</url>
                </pluginRepository>
                <pluginRepository>
                    <id>m2-local</id>
                    <url>file://${HOME}/.m2/repository_backup</url>
                </pluginRepository>            
            </pluginRepositories>
        </profile>
    </profiles>
    <activeProfiles>
        <activeProfile>m2-mix-remote-local</activeProfile>
    </activeProfiles>
</settings>
二、收集本地依赖包
（1）重命名原来的maven本地仓库，后续将从该目录下提取无法从公网下载的依赖包。'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://luanrz.github.io/posts/"},{"@type":"ListItem","position":3,"name":"Maven私有包备份","item":"https://luanrz.github.io/posts/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/maven%E7%A7%81%E6%9C%89%E5%8C%85%E5%A4%87%E4%BB%BD/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Maven私有包备份","name":"Maven私有包备份","description":"一、修改Maven配置文件 为支持混合加载远程与本地包，需在maven配置文件中分别指定远程和本地地址：\n远程：https://maven.aliyun.com/repository/central 本地：file://${HOME}/.m2/repository_backup vim ~/.m2/settings.xml \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; \u0026lt;settings\u0026gt; \u0026lt;profiles\u0026gt; \u0026lt;profile\u0026gt; \u0026lt;id\u0026gt;m2-mix-remote-local\u0026lt;/id\u0026gt; \u0026lt;repositories\u0026gt; \u0026lt;repository\u0026gt; \u0026lt;id\u0026gt;m2-remote\u0026lt;/id\u0026gt; \u0026lt;url\u0026gt;https://maven.aliyun.com/repository/central\u0026lt;/url\u0026gt; \u0026lt;/repository\u0026gt; \u0026lt;repository\u0026gt; \u0026lt;id\u0026gt;m2-local\u0026lt;/id\u0026gt; \u0026lt;url\u0026gt;file://${HOME}/.m2/repository_backup\u0026lt;/url\u0026gt; \u0026lt;/repository\u0026gt; \u0026lt;/repositories\u0026gt; \u0026lt;pluginRepositories\u0026gt; \u0026lt;pluginRepository\u0026gt; \u0026lt;id\u0026gt;m2-remote\u0026lt;/id\u0026gt; \u0026lt;url\u0026gt;https://maven.aliyun.com/repository/central\u0026lt;/url\u0026gt; \u0026lt;/pluginRepository\u0026gt; \u0026lt;pluginRepository\u0026gt; \u0026lt;id\u0026gt;m2-local\u0026lt;/id\u0026gt; \u0026lt;url\u0026gt;file://${HOME}/.m2/repository_backup\u0026lt;/url\u0026gt; \u0026lt;/pluginRepository\u0026gt; \u0026lt;/pluginRepositories\u0026gt; \u0026lt;/profile\u0026gt; \u0026lt;/profiles\u0026gt; \u0026lt;activeProfiles\u0026gt; \u0026lt;activeProfile\u0026gt;m2-mix-remote-local\u0026lt;/activeProfile\u0026gt; \u0026lt;/activeProfiles\u0026gt; \u0026lt;/settings\u0026gt; 二、收集本地依赖包 （1）重命名原来的maven本地仓库，后续将从该目录下提取无法从公网下载的依赖包。\n","keywords":["Java","Maven"],"articleBody":"一、修改Maven配置文件 为支持混合加载远程与本地包，需在maven配置文件中分别指定远程和本地地址：\n远程：https://maven.aliyun.com/repository/central 本地：file://${HOME}/.m2/repository_backup vim ~/.m2/settings.xml \u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e m2-mix-remote-local m2-remote https://maven.aliyun.com/repository/central m2-local file://${HOME}/.m2/repository_backup m2-remote https://maven.aliyun.com/repository/central m2-local file://${HOME}/.m2/repository_backup m2-mix-remote-local 二、收集本地依赖包 （1）重命名原来的maven本地仓库，后续将从该目录下提取无法从公网下载的依赖包。\nmv ~/.m2/repository ~/.m2/repository_origin （2）进入代码根目录，获取缺失的依赖包信息。\n# 二选一 mvn dependency:go-offline mvn compile （3）将上述依赖包保存到dependencies.txt文件中：\nvim dependencies.txt com.openjaw.certifiedschemas:openjaw-certifiedschemas:jar:7.24.0-RL-SNAPSHOT com.oracle:ojdbc6:jar:11.2.0.3.0 （4）编写并执行收集本地依赖包脚本：\nvim collect_repo.sh #!/bin/bash repo_origin=\"$HOME/.m2/repository_origin\" repo_backup=\"$HOME/.m2/repository_backup\" repo_current=\"$HOME/.m2/repository\" while IFS=: read -r group artifact ext version; do real_group=$(echo \"$group\" | tr '.' '/') dir=\"$real_group/$artifact/$version\" pom_file=\"$artifact-$version.pom\" jar_file=\"$artifact-$version.jar\" zip_file=\"$artifact-$version.zip\" echo \"-\u003e $repo_backup/$dir\" mkdir -p \"$repo_backup/$dir\" if [ $ext = 'pom' ]; then cp \"$repo_origin/$dir/$pom_file\" \"$repo_backup/$dir/\" sha1sum \"$repo_backup/$dir/$pom_file\" \u003e \"$repo_backup/$dir/$pom_file.sha1\" fi if [ $ext = 'jar' ]; then cp \"$repo_origin/$dir/$pom_file\" \"$repo_backup/$dir/\" cp \"$repo_origin/$dir/$jar_file\" \"$repo_backup/$dir/\" sha1sum \"$repo_backup/$dir/$pom_file\" \u003e \"$repo_backup/$dir/$pom_file.sha1\" sha1sum \"$repo_backup/$dir/$jar_file\" \u003e \"$repo_backup/$dir/$jar_file.sha1\" fi if [ $ext = 'zip' ]; then cp \"$repo_origin/$dir/$pom_file\" \"$repo_backup/$dir/\" cp \"$repo_origin/$dir/$zip_file\" \"$repo_backup/$dir/\" sha1sum \"$repo_backup/$dir/$pom_file\" \u003e \"$repo_backup/$dir/$pom_file.sha1\" sha1sum \"$repo_backup/$dir/$zip_file\" \u003e \"$repo_backup/$dir/$zip_file.sha1\" fi rm -rf \"$repo_current/$dir\" done \u003c dependencies.txt ./collect_repo.sh （4）重复上述步骤2-4，直至所有缺失的依赖包均收集成功。\n三、打包本地依赖包 经过上述流程，所有的本地依赖包均被收集到了$HOME/.m2/repository_backup目录，可使用tar与gpg对其进行压缩与解压。\n（1）压缩\nvim encrypt.sh #!/bin/bash tar cJvhf - repository_backup | gpg -co repository_backup.txz.gpg （2）解压\nvim decrypt.sh #!/bin/bash gpg -d repository_backup.txz.gpg | tar -xJvf - ","wordCount":"545","inLanguage":"zh","datePublished":"2025-03-27T17:47:08+08:00","dateModified":"2025-03-27T17:47:08+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://luanrz.github.io/posts/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/maven%E7%A7%81%E6%9C%89%E5%8C%85%E5%A4%87%E4%BB%BD/"},"publisher":{"@type":"Organization","name":"luanrz's blog","logo":{"@type":"ImageObject","url":"https://luanrz.github.io/images/icon.jpg"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://luanrz.github.io/ accesskey=h title="luanrz's blog (Alt + H)">luanrz's blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://luanrz.github.io/ title=首页><span>首页</span></a></li><li><a href=https://luanrz.github.io/search/ title="搜索 (Alt + /)" accesskey=/><span>搜索</span></a></li><li><a href=https://luanrz.github.io/archives/ title=归档><span>归档</span></a></li><li><a href=https://luanrz.github.io/categories/ title=分类><span>分类</span></a></li><li><a href=https://luanrz.github.io/tags/ title=标签><span>标签</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Maven私有包备份</h1><div class=post-meta><span title='2025-03-27 17:47:08 +0800 +0800'>2025-03-27</span>&nbsp;·&nbsp;2 分钟&nbsp;·&nbsp;545 字</div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><ul><li><a href=#%e4%b8%80%e4%bf%ae%e6%94%b9maven%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6 aria-label=一、修改Maven配置文件>一、修改Maven配置文件</a></li><li><a href=#%e4%ba%8c%e6%94%b6%e9%9b%86%e6%9c%ac%e5%9c%b0%e4%be%9d%e8%b5%96%e5%8c%85 aria-label=二、收集本地依赖包>二、收集本地依赖包</a></li><li><a href=#%e4%b8%89%e6%89%93%e5%8c%85%e6%9c%ac%e5%9c%b0%e4%be%9d%e8%b5%96%e5%8c%85 aria-label=三、打包本地依赖包>三、打包本地依赖包</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement||=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e}),elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h3 id=一修改maven配置文件>一、修改Maven配置文件<a hidden class=anchor aria-hidden=true href=#一修改maven配置文件>#</a></h3><p>为支持混合加载远程与本地包，需在maven配置文件中分别指定远程和本地地址：</p><ul><li>远程：<code>https://maven.aliyun.com/repository/central</code></li><li>本地：<code>file://${HOME}/.m2/repository_backup</code></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>vim ~/.m2/settings.xml
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;settings&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;profiles&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;profile&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;id&gt;</span>m2-mix-remote-local<span style=color:#f92672>&lt;/id&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;repositories&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;repository&gt;</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&lt;id&gt;</span>m2-remote<span style=color:#f92672>&lt;/id&gt;</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&lt;url&gt;</span>https://maven.aliyun.com/repository/central<span style=color:#f92672>&lt;/url&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;/repository&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;repository&gt;</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&lt;id&gt;</span>m2-local<span style=color:#f92672>&lt;/id&gt;</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&lt;url&gt;</span>file://${HOME}/.m2/repository_backup<span style=color:#f92672>&lt;/url&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;/repository&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;/repositories&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;pluginRepositories&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;pluginRepository&gt;</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&lt;id&gt;</span>m2-remote<span style=color:#f92672>&lt;/id&gt;</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&lt;url&gt;</span>https://maven.aliyun.com/repository/central<span style=color:#f92672>&lt;/url&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;/pluginRepository&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;pluginRepository&gt;</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&lt;id&gt;</span>m2-local<span style=color:#f92672>&lt;/id&gt;</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&lt;url&gt;</span>file://${HOME}/.m2/repository_backup<span style=color:#f92672>&lt;/url&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;/pluginRepository&gt;</span>            
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;/pluginRepositories&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/profile&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/profiles&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;activeProfiles&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;activeProfile&gt;</span>m2-mix-remote-local<span style=color:#f92672>&lt;/activeProfile&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/activeProfiles&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/settings&gt;</span>
</span></span></code></pre></div><h3 id=二收集本地依赖包>二、收集本地依赖包<a hidden class=anchor aria-hidden=true href=#二收集本地依赖包>#</a></h3><p>（1）重命名原来的maven本地仓库，后续将从该目录下提取无法从公网下载的依赖包。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>mv ~/.m2/repository ~/.m2/repository_origin
</span></span></code></pre></div><p>（2）进入代码根目录，获取缺失的依赖包信息。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># 二选一</span>
</span></span><span style=display:flex><span>mvn dependency:go-offline
</span></span><span style=display:flex><span>mvn compile 
</span></span></code></pre></div><p>（3）将上述依赖包保存到<code>dependencies.txt</code>文件中：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>vim dependencies.txt
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>com.openjaw.certifiedschemas:openjaw-certifiedschemas:jar:7.24.0-RL-SNAPSHOT
</span></span><span style=display:flex><span>com.oracle:ojdbc6:jar:11.2.0.3.0
</span></span></code></pre></div><p>（4）编写并执行收集本地依赖包脚本：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>vim collect_repo.sh
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>repo_origin<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$HOME<span style=color:#e6db74>/.m2/repository_origin&#34;</span>
</span></span><span style=display:flex><span>repo_backup<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$HOME<span style=color:#e6db74>/.m2/repository_backup&#34;</span>
</span></span><span style=display:flex><span>repo_current<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$HOME<span style=color:#e6db74>/.m2/repository&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span> IFS<span style=color:#f92672>=</span>: read -r group artifact ext version; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    real_group<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>echo <span style=color:#e6db74>&#34;</span>$group<span style=color:#e6db74>&#34;</span> | tr <span style=color:#e6db74>&#39;.&#39;</span> <span style=color:#e6db74>&#39;/&#39;</span><span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>    dir<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$real_group<span style=color:#e6db74>/</span>$artifact<span style=color:#e6db74>/</span>$version<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>    pom_file<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$artifact<span style=color:#e6db74>-</span>$version<span style=color:#e6db74>.pom&#34;</span>
</span></span><span style=display:flex><span>    jar_file<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$artifact<span style=color:#e6db74>-</span>$version<span style=color:#e6db74>.jar&#34;</span>
</span></span><span style=display:flex><span>    zip_file<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$artifact<span style=color:#e6db74>-</span>$version<span style=color:#e6db74>.zip&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    echo <span style=color:#e6db74>&#34;-&gt; </span>$repo_backup<span style=color:#e6db74>/</span>$dir<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>    mkdir -p <span style=color:#e6db74>&#34;</span>$repo_backup<span style=color:#e6db74>/</span>$dir<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> $ext <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;pom&#39;</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>        cp <span style=color:#e6db74>&#34;</span>$repo_origin<span style=color:#e6db74>/</span>$dir<span style=color:#e6db74>/</span>$pom_file<span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;</span>$repo_backup<span style=color:#e6db74>/</span>$dir<span style=color:#e6db74>/&#34;</span>
</span></span><span style=display:flex><span>        sha1sum <span style=color:#e6db74>&#34;</span>$repo_backup<span style=color:#e6db74>/</span>$dir<span style=color:#e6db74>/</span>$pom_file<span style=color:#e6db74>&#34;</span> &gt; <span style=color:#e6db74>&#34;</span>$repo_backup<span style=color:#e6db74>/</span>$dir<span style=color:#e6db74>/</span>$pom_file<span style=color:#e6db74>.sha1&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> $ext <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;jar&#39;</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>        cp <span style=color:#e6db74>&#34;</span>$repo_origin<span style=color:#e6db74>/</span>$dir<span style=color:#e6db74>/</span>$pom_file<span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;</span>$repo_backup<span style=color:#e6db74>/</span>$dir<span style=color:#e6db74>/&#34;</span>
</span></span><span style=display:flex><span>        cp <span style=color:#e6db74>&#34;</span>$repo_origin<span style=color:#e6db74>/</span>$dir<span style=color:#e6db74>/</span>$jar_file<span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;</span>$repo_backup<span style=color:#e6db74>/</span>$dir<span style=color:#e6db74>/&#34;</span>
</span></span><span style=display:flex><span>        sha1sum <span style=color:#e6db74>&#34;</span>$repo_backup<span style=color:#e6db74>/</span>$dir<span style=color:#e6db74>/</span>$pom_file<span style=color:#e6db74>&#34;</span> &gt; <span style=color:#e6db74>&#34;</span>$repo_backup<span style=color:#e6db74>/</span>$dir<span style=color:#e6db74>/</span>$pom_file<span style=color:#e6db74>.sha1&#34;</span>
</span></span><span style=display:flex><span>        sha1sum <span style=color:#e6db74>&#34;</span>$repo_backup<span style=color:#e6db74>/</span>$dir<span style=color:#e6db74>/</span>$jar_file<span style=color:#e6db74>&#34;</span> &gt; <span style=color:#e6db74>&#34;</span>$repo_backup<span style=color:#e6db74>/</span>$dir<span style=color:#e6db74>/</span>$jar_file<span style=color:#e6db74>.sha1&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> $ext <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;zip&#39;</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>        cp <span style=color:#e6db74>&#34;</span>$repo_origin<span style=color:#e6db74>/</span>$dir<span style=color:#e6db74>/</span>$pom_file<span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;</span>$repo_backup<span style=color:#e6db74>/</span>$dir<span style=color:#e6db74>/&#34;</span>
</span></span><span style=display:flex><span>        cp <span style=color:#e6db74>&#34;</span>$repo_origin<span style=color:#e6db74>/</span>$dir<span style=color:#e6db74>/</span>$zip_file<span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;</span>$repo_backup<span style=color:#e6db74>/</span>$dir<span style=color:#e6db74>/&#34;</span>
</span></span><span style=display:flex><span>        sha1sum <span style=color:#e6db74>&#34;</span>$repo_backup<span style=color:#e6db74>/</span>$dir<span style=color:#e6db74>/</span>$pom_file<span style=color:#e6db74>&#34;</span> &gt; <span style=color:#e6db74>&#34;</span>$repo_backup<span style=color:#e6db74>/</span>$dir<span style=color:#e6db74>/</span>$pom_file<span style=color:#e6db74>.sha1&#34;</span>
</span></span><span style=display:flex><span>        sha1sum <span style=color:#e6db74>&#34;</span>$repo_backup<span style=color:#e6db74>/</span>$dir<span style=color:#e6db74>/</span>$zip_file<span style=color:#e6db74>&#34;</span> &gt; <span style=color:#e6db74>&#34;</span>$repo_backup<span style=color:#e6db74>/</span>$dir<span style=color:#e6db74>/</span>$zip_file<span style=color:#e6db74>.sha1&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fi</span>    
</span></span><span style=display:flex><span>    rm -rf <span style=color:#e6db74>&#34;</span>$repo_current<span style=color:#e6db74>/</span>$dir<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span> &lt; dependencies.txt
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>./collect_repo.sh
</span></span></code></pre></div><p>（4）重复上述步骤2-4，直至所有缺失的依赖包均收集成功。</p><h3 id=三打包本地依赖包>三、打包本地依赖包<a hidden class=anchor aria-hidden=true href=#三打包本地依赖包>#</a></h3><p>经过上述流程，所有的本地依赖包均被收集到了<code>$HOME/.m2/repository_backup</code>目录，可使用tar与gpg对其进行压缩与解压。</p><p>（1）压缩</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>vim encrypt.sh
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>tar cJvhf - repository_backup | gpg -co repository_backup.txz.gpg
</span></span></code></pre></div><p>（2）解压</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>vim decrypt.sh
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>gpg -d repository_backup.txz.gpg | tar -xJvf -
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://luanrz.github.io/tags/java/>Java</a></li><li><a href=https://luanrz.github.io/tags/maven/>Maven</a></li></ul><nav class=paginav><a class=prev href=https://luanrz.github.io/posts/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/java%E6%89%93%E5%8C%85%E5%86%85%E7%BD%AEjre/><span class=title>« 上一页</span><br><span>Java打包内置JRE</span>
</a><a class=next href=https://luanrz.github.io/posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/c++%E5%B8%B8%E7%94%A8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%9A%84%E5%AE%9A%E4%B9%89%E4%B8%8E%E4%BD%BF%E7%94%A8/><span class=title>下一页 »</span><br><span>C++常用数据结构的简单使用</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://luanrz.github.io/>luanrz's blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>