<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Java8函数式编程入门 | luanrz's blog</title><meta name=keywords content="Java"><meta name=description content='一、Lambda表达式
什么是Lambda表达式?
Lambda表达式是一个函数，有入参和出参，它表示一个行为。
Lambda表达式是一个对象，Java中函数是二等公民，只能依附于类存在，Lambda表达式的目标类型被称之为函数接口。
（一）Lambda表达式与匿名内部类对象
Lambda表达式和匿名内部类对象很像，在正式介绍Lambda表达式之前，先看看一个匿名内部类对象的例子。
一般情况下，接口不可以直接实例化，但可以在new接口的过程中重写接口中的方法来创建一个匿名内部类对象。如下所示：
Runnable anonymousClassesRunnable = new Runnable() {
    @Override
    public void run() {
        System.out.println("我是一个匿名类内部类对象");
    }
};
有没有更简单的方式呢？请看下述代码：
Runnable lambdaRunnable = () -> System.out.println("我是一个lambda表达式");
上述代码中=右侧的() -> System.out.println("我是一个lambda表达式")是一个Lambda表达式。
这个Lambda表达式由三部分组成：

() : 请求参数，这里为空（对应了上述匿名内部类中run方法的请求参数）
System.out.println("我是一个lambda表达式"): 方法体（对应了上述匿名内部类中run方法的方法体）
-> : Lambda表达式标识符，连接左侧的请求参数和右侧的方法体

可以看到，Lambda表达式与匿名内部类对象完全等价，它们都在=右侧，都可以被赋值给=左侧的接口变量，换言之，Lambda表达式本质上是一个接口的实例化对象（在Java中，万物皆对象，lambda表达式也不例外）。那么，任意接口都可以是Lambda表达式的目标类型吗？'><meta name=author content><link rel=canonical href=https://luanrz.github.io/posts/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/java8%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/><link crossorigin=anonymous href=/assets/css/stylesheet.ed6c30fee125be816b653632a2732f92313b593583d98576c9eb2bf33a42b6e1.css integrity="sha256-7Www/uElvoFrZTYyonMvkjE7WTWD2YV2yesr8zpCtuE=" rel="preload stylesheet" as=style><link rel=icon href=https://luanrz.github.io/images/icon.jpg><link rel=icon type=image/png sizes=16x16 href=https://luanrz.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://luanrz.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://luanrz.github.io/apple-touch-icon.png><link rel=mask-icon href=https://luanrz.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://luanrz.github.io/posts/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/java8%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script>const loadScript=(e,t)=>{var n=document.createElement("script");n.onerror=e=>{throw new URIError("The script "+e.target.src+" didn't load correctly.")},t&&(n.onload=t),document.head.insertAdjacentElement("beforeend",n),n.src=e},loadPlantUMLOnNeed=()=>{let e="language-plantuml";document.querySelectorAll("[class^="+e+"]").length>0&&loadScript("https://fastly.jsdelivr.net/gh/jmnote/plantuml-encoder@1.2.4/dist/plantuml-encoder.min.js",()=>{(function(){Array.prototype.forEach.call(document.querySelectorAll("[class^="+e+"]"),function(e){let t=document.createElement("IMG");t.loading="lazy",t.src="http://www.plantuml.com/plantuml/svg/~1"+plantumlEncoder.encode(e.innerText),e.parentNode.insertBefore(t,e),e.style.display="none"})})(),console.log("PlantUML init done")})};window.addEventListener("load",function(){loadPlantUMLOnNeed()})</script><meta property="og:url" content="https://luanrz.github.io/posts/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/java8%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"><meta property="og:site_name" content="luanrz's blog"><meta property="og:title" content="Java8函数式编程入门"><meta property="og:description" content='一、Lambda表达式 什么是Lambda表达式?
Lambda表达式是一个函数，有入参和出参，它表示一个行为。
Lambda表达式是一个对象，Java中函数是二等公民，只能依附于类存在，Lambda表达式的目标类型被称之为函数接口。
（一）Lambda表达式与匿名内部类对象 Lambda表达式和匿名内部类对象很像，在正式介绍Lambda表达式之前，先看看一个匿名内部类对象的例子。
一般情况下，接口不可以直接实例化，但可以在new接口的过程中重写接口中的方法来创建一个匿名内部类对象。如下所示：
Runnable anonymousClassesRunnable = new Runnable() { @Override public void run() { System.out.println("我是一个匿名类内部类对象"); } }; 有没有更简单的方式呢？请看下述代码：
Runnable lambdaRunnable = () -> System.out.println("我是一个lambda表达式"); 上述代码中=右侧的() -> System.out.println("我是一个lambda表达式")是一个Lambda表达式。
这个Lambda表达式由三部分组成：
() : 请求参数，这里为空（对应了上述匿名内部类中run方法的请求参数） System.out.println("我是一个lambda表达式"): 方法体（对应了上述匿名内部类中run方法的方法体） -> : Lambda表达式标识符，连接左侧的请求参数和右侧的方法体 可以看到，Lambda表达式与匿名内部类对象完全等价，它们都在=右侧，都可以被赋值给=左侧的接口变量，换言之，Lambda表达式本质上是一个接口的实例化对象（在Java中，万物皆对象，lambda表达式也不例外）。那么，任意接口都可以是Lambda表达式的目标类型吗？'><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-08-21T09:38:30+00:00"><meta property="article:modified_time" content="2021-08-21T09:38:30+00:00"><meta property="article:tag" content="Java"><meta name=twitter:card content="summary"><meta name=twitter:title content="Java8函数式编程入门"><meta name=twitter:description content='一、Lambda表达式
什么是Lambda表达式?
Lambda表达式是一个函数，有入参和出参，它表示一个行为。
Lambda表达式是一个对象，Java中函数是二等公民，只能依附于类存在，Lambda表达式的目标类型被称之为函数接口。
（一）Lambda表达式与匿名内部类对象
Lambda表达式和匿名内部类对象很像，在正式介绍Lambda表达式之前，先看看一个匿名内部类对象的例子。
一般情况下，接口不可以直接实例化，但可以在new接口的过程中重写接口中的方法来创建一个匿名内部类对象。如下所示：
Runnable anonymousClassesRunnable = new Runnable() {
    @Override
    public void run() {
        System.out.println("我是一个匿名类内部类对象");
    }
};
有没有更简单的方式呢？请看下述代码：
Runnable lambdaRunnable = () -> System.out.println("我是一个lambda表达式");
上述代码中=右侧的() -> System.out.println("我是一个lambda表达式")是一个Lambda表达式。
这个Lambda表达式由三部分组成：

() : 请求参数，这里为空（对应了上述匿名内部类中run方法的请求参数）
System.out.println("我是一个lambda表达式"): 方法体（对应了上述匿名内部类中run方法的方法体）
-> : Lambda表达式标识符，连接左侧的请求参数和右侧的方法体

可以看到，Lambda表达式与匿名内部类对象完全等价，它们都在=右侧，都可以被赋值给=左侧的接口变量，换言之，Lambda表达式本质上是一个接口的实例化对象（在Java中，万物皆对象，lambda表达式也不例外）。那么，任意接口都可以是Lambda表达式的目标类型吗？'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://luanrz.github.io/posts/"},{"@type":"ListItem","position":3,"name":"Java8函数式编程入门","item":"https://luanrz.github.io/posts/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/java8%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Java8函数式编程入门","name":"Java8函数式编程入门","description":"一、Lambda表达式 什么是Lambda表达式?\nLambda表达式是一个函数，有入参和出参，它表示一个行为。\nLambda表达式是一个对象，Java中函数是二等公民，只能依附于类存在，Lambda表达式的目标类型被称之为函数接口。\n（一）Lambda表达式与匿名内部类对象 Lambda表达式和匿名内部类对象很像，在正式介绍Lambda表达式之前，先看看一个匿名内部类对象的例子。\n一般情况下，接口不可以直接实例化，但可以在new接口的过程中重写接口中的方法来创建一个匿名内部类对象。如下所示：\nRunnable anonymousClassesRunnable = new Runnable() { @Override public void run() { System.out.println(\u0026#34;我是一个匿名类内部类对象\u0026#34;); } }; 有没有更简单的方式呢？请看下述代码：\nRunnable lambdaRunnable = () -\u0026gt; System.out.println(\u0026#34;我是一个lambda表达式\u0026#34;); 上述代码中=右侧的() -\u0026gt; System.out.println(\u0026quot;我是一个lambda表达式\u0026quot;)是一个Lambda表达式。\n这个Lambda表达式由三部分组成：\n() : 请求参数，这里为空（对应了上述匿名内部类中run方法的请求参数） System.out.println(\u0026quot;我是一个lambda表达式\u0026quot;): 方法体（对应了上述匿名内部类中run方法的方法体） -\u0026gt; : Lambda表达式标识符，连接左侧的请求参数和右侧的方法体 可以看到，Lambda表达式与匿名内部类对象完全等价，它们都在=右侧，都可以被赋值给=左侧的接口变量，换言之，Lambda表达式本质上是一个接口的实例化对象（在Java中，万物皆对象，lambda表达式也不例外）。那么，任意接口都可以是Lambda表达式的目标类型吗？\n","keywords":["Java"],"articleBody":"一、Lambda表达式 什么是Lambda表达式?\nLambda表达式是一个函数，有入参和出参，它表示一个行为。\nLambda表达式是一个对象，Java中函数是二等公民，只能依附于类存在，Lambda表达式的目标类型被称之为函数接口。\n（一）Lambda表达式与匿名内部类对象 Lambda表达式和匿名内部类对象很像，在正式介绍Lambda表达式之前，先看看一个匿名内部类对象的例子。\n一般情况下，接口不可以直接实例化，但可以在new接口的过程中重写接口中的方法来创建一个匿名内部类对象。如下所示：\nRunnable anonymousClassesRunnable = new Runnable() { @Override public void run() { System.out.println(\"我是一个匿名类内部类对象\"); } }; 有没有更简单的方式呢？请看下述代码：\nRunnable lambdaRunnable = () -\u003e System.out.println(\"我是一个lambda表达式\"); 上述代码中=右侧的() -\u003e System.out.println(\"我是一个lambda表达式\")是一个Lambda表达式。\n这个Lambda表达式由三部分组成：\n() : 请求参数，这里为空（对应了上述匿名内部类中run方法的请求参数） System.out.println(\"我是一个lambda表达式\"): 方法体（对应了上述匿名内部类中run方法的方法体） -\u003e : Lambda表达式标识符，连接左侧的请求参数和右侧的方法体 可以看到，Lambda表达式与匿名内部类对象完全等价，它们都在=右侧，都可以被赋值给=左侧的接口变量，换言之，Lambda表达式本质上是一个接口的实例化对象（在Java中，万物皆对象，lambda表达式也不例外）。那么，任意接口都可以是Lambda表达式的目标类型吗？\n（二） 函数接口 Lambda表达式只能表示一个行为，这就意味着其对应的接口只能有唯一的方法。同时，为了更精确地标识Lambda表达式的目标接口，通常会给对应的接口加上@FunctionalInterface注解。这种接口叫做函数接口。\n函数接口是Lambda表达式的目标类型。\n查看一下上述例子中Runnable类的源码，如下所示：\npackage java.lang; @FunctionalInterface public interface Runnable { public abstract void run(); } 可以看到，Runnable类有以下特性：\n只有一个方法 含有@FunctionalInterface注解 所以，Runnable是一个函数接口。\njdk的java.util.function包中内置了许多函数接口，常见的如下所示：\n接口 方法 使用场景 Predicate boolean test(T t) Strem的filter/match系列 Consumer void accept(T t) Strem的forEach/peek Function R apply(T t) Strem的map系列/flatMap系列 Supplier T get() Strem的collect/generate 二、Stream Stream基于Lambda表达式，可以对集合进行复杂操作，实现集合的过滤、映射、去重、排序、查找、求值等功能。\n（一）Stream常用API一览 一个有效的Stream操作可以由0到n个中间操作和1个终止操作组成。\n中间操作（intermediate operation）返回Stream对象，可以在Stream操作过程中链式调用。\n终止操作（terminal operation）返回空或特定值，在终止操作之前，任何中间操作都不会执行。\n1. 中间操作 方法 请求参数类型 返回类型 功能 filter Predicate Stream 过滤 map Function Stream 映射 flatMap Function Stream 映射 distinct void Stream 去重 sorted Comparator Stream 排序 其它中间操作：mapToInt、mapToLong、mapToDouble、flatMapToInt、flatMapToLong、flatMapToDouble、peek、limit、skip\n2. 终止操作 方法 请求参数类型 返回类型 功能 forEach Consumer void 循环 collect Collector … 收集 findFirst void Optional 查找 findAny void Optional 查找 anyMatch Predicate boolean 查找 allMatch Predicate boolean 查找 noneMatch Predicate boolean 查找 min Comparator Optional 求值 max Comparator Optional 求值 count void long 求值 其它终止操作：forEachOrdered、reduce、toArray\n（二）创建Stream对象 在正式介绍Stream用法之前，先定义两种类型的列表，后续的所有实例都是基于这两种列表。\nclass Student { private String studentId; private String name; private String gender; private int age; } class School { private String schoolId; private String name; private List\u003cStudent\u003e students; } List\u003cStudent\u003e syStudents = new ArrayList\u003c\u003e(); List\u003cStudent\u003e fdStudents = new ArrayList\u003c\u003e(); List\u003cSchool\u003e schools = new ArrayList\u003c\u003e(); syStudents.add(new Student(\"1\", \"野原新之助\", \"男\", 5)); syStudents.add(new Student(\"2\", \"风间彻\", \"男\", 5)); syStudents.add(new Student(\"3\", \"樱田妮妮\", \"女\", 4)); syStudents.add(new Student(\"4\", \"佐藤正男\", \"男\", 4)); syStudents.add(new Student(\"5\", \"阿呆\", \"男\", 4)); fdStudents.add(new Student(\"1\", \"图图\", \"男\", 3)); fdStudents.add(new Student(\"2\", \"小美\", \"女\", 3)); fdStudents.add(new Student(\"3\", \"刷子\", \"男\", 4)); fdStudents.add(new Student(\"4\", \"壮壮\", \"男\", 5)); fdStudents.add(new Student(\"5\", \"小豆丁\", \"男\", 1)); schools.add(new School(\"1\", \"双叶幼稚园\", syStudents)); schools.add(new School(\"2\", \"翻斗幼儿园\", fdStudents)); 创建Stream对象一般使用Collection.stream()方法，如下所示：\nStream\u003cStudent\u003e studentStream = syStudents.stream(); //创建一个元素为Student的Stream对象 Stream\u003cSchool\u003e schoolsStream = schools.stream(); //创建一个元素为Student的Stream对象 （二）过滤 Stream过滤可以使用filter方法，过滤掉集合中符合特定条件的元素。这是一个中间操作，一般配合collect或findFirst等终止操作一起使用。\nfilter方法接受一个目标类型为Predicate函数接口的lambda表达式作为请求参数。\n// 找到双叶幼稚园中所有年龄大于等于4岁的男孩子 List\u003cStudent\u003e newStudents = syStudents .stream() // 创建一个元素为Student的Stream对象 .filter(student -\u003e \"男\".equals(student.gender)) // 过滤得到所有性别为男的小朋友 .filter(student -\u003e student.age \u003e= 4) // 在上一步过滤的基础上, 再次过滤得到所有年龄大于等于4的小朋友 .collect(Collectors.toList()); // 收集过滤之后的集合 Assert.assertEquals(3, newStudents.size()); （三）映射 Stream映射可以使用map或flatMap方法，将集合中的元素映射为另一个元素。这是一个中间操作，一般配合collect等终止操作一起使用。\nmap方法与flatMap方法接受一个目标类型为Function函数接口的lambda表达式作为请求参数。\n// 找到双叶幼稚园中所有小朋友的名字 List\u003cString\u003e newStudents = syStudents .stream() .map(student -\u003e student.name) // 将student对象映射为姓名 .collect(Collectors.toList());// 收集姓名集合 Assert.assertEquals(\"[野原新之助, 风间彻, 樱田妮妮, 佐藤正男, 阿呆]\", newStudents.toString()); // 获得所有幼稚园中的小朋友集合 List\u003cStudent\u003e newStudentsFromAllSchool = schools .stream() .flatMap(school -\u003e school.students.stream()) // 将school对象映射为一个student流, 并将所有的student流合并成一个 .collect(Collectors.toList()); Assert.assertEquals(10, newStudentsFromAllSchool.size()); （四）去重 Stream去重可以使用distinct方法，去除集合中的重复元素。这是一个中间操作，一般配合collect等终止操作一起使用。\ndistinct方法没有请求参数, 只有重写集合元素类的equals方法时, distinct去重才有意义。\nsyStudents.add(new Student(\"1\",\"蜡笔小新\",\"男\", 5)); // 去除双叶幼稚园中重复的小朋友 List\u003cStudent\u003e newStudents = syStudents .stream() .distinct() // 去重, 必须重写equals方法 .collect(Collectors.toList());//收集去重后的集合 Assert.assertEquals(5, newStudents.size()); （五）排序 Stream排序可以使用sorted方法，对集合中的元素进行排序。这是一个中间操作，一般配合collect等终止操作一起使用。\nsorted方法可以接受一个目标类型为Comparator函数接口的lambda表达式作为请求参数。sorted方法也有一个无参的重载方法，必须保证集合元素类实现实现Comparable接口，才能调用sorted的无参重载方法否则会抛出ClassCastException异常。\n// 将双叶幼稚园中所有的小朋友按年龄从小到大顺序重新排序 List\u003cStudent\u003e newStudents = syStudents .stream() .sorted((o1, o2) -\u003e o1.age - o2.age) // 按年龄从小到大排序 .collect(Collectors.toList()); //收集排序后的集合 Assert.assertEquals(3, newStudents.get(0).age); （六）查找 Stream查找也可以使用findFirst及findAny方法，找到集合中第一个或任意满足特定条件的一个元素。这是一个终止操作，一般配合filter中间操作一起使用。\nfind系列方法没有请求参数, 返回一个Optional对象。\n// 查找双叶幼稚园中第一个studentId为1的小朋友 Optional\u003cStudent\u003e optionalFirstStudent = syStudents .stream() .filter(student -\u003e Objects.equals(student.studentId, \"1\")) // 过滤得到所有studentId为1的小朋友 .findFirst(); // 在上述过滤的到的集合中找到第一个符合条件的元素 // Optional对象处理 Student firstStudent = optionalFirstStudent.get(); Assert.assertEquals(\"野原新之助\", firstStudent.name); // 查找双叶幼稚园任意一个3岁的小朋友 Optional\u003cStudent\u003e optionalAnyStudent = syStudents .stream() .filter(student -\u003e Objects.equals(student.age, 3)) // 过滤得到所有年龄为3的小朋友 .findAny(); // 在上述过滤的到的集合中找到第一个符合条件的元素 // Optional对象处理 Student anyStudent = optionalAnyStudent.orElse(new Student(null, null, null, 0)); Assert.assertEquals(\"阿呆\", anyStudent.name); Stream查找使用anyMatch、allMatch及noneMatch方法，判断集合中的元素是否满足特定条件。这是一个终止操作。\nmatch系列方法接受一个目标类型为Predicate函数接口的lambda表达式作为请求参数。\n// 判断双叶幼稚园中是否所有的小朋友的年龄都小于等于5岁 boolean isAllCorrect = syStudents .stream() .allMatch(student -\u003e student.age \u003c= 5); // 判断是否所有的小朋友的年龄都小于等于5岁 Assert.assertTrue(isAllCorrect); // 判断双叶幼稚园中是否有任意一个的小朋友是女孩子 boolean isAnyCorrect = syStudents .stream() .anyMatch(student -\u003e Objects.equals(student.gender, \"女\")); // 判断有任意一个的小朋友的性别为女 Assert.assertTrue(isAnyCorrect); // 判断双叶幼稚园中是否没有一个小朋友的年龄大于5岁 boolean isNoneCorrect = syStudents .stream() .noneMatch(student -\u003e student.age \u003e 5); // 判断是否没有一个小朋友的年龄大于5岁 Assert.assertTrue(isNoneCorrect); （七）求值 Stream排序可以使用min、max及count等方法，求得集合的最小值、最大值及元素个数等值。这是一个终止操作。\n// 计算双叶幼稚园中所有的小朋友的最小年龄 int minAge = syStudents .stream() .map(student -\u003e student.age) .min((o1, o2) -\u003e o1 - o2) .get(); // 计算双叶幼稚园中所有的小朋友的最大年龄 int maxAge = syStudents .stream() .map(student -\u003e student.age) .max((o1, o2) -\u003e o1 - o2) .get(); // 计算双叶幼稚园中所有的小朋友的人数 long count = syStudents .stream() .count(); Assert.assertEquals(3, minAge); Assert.assertEquals(5, maxAge); Assert.assertEquals(5, count); 附录 代码实例 import org.junit.Assert; import org.junit.Before; import org.junit.Test; import java.util.ArrayList; import java.util.List; import java.util.Objects; import java.util.Optional; import java.util.stream.Collectors; import java.util.stream.Stream; public class LambdaDemo { List\u003cStudent\u003e syStudents = new ArrayList\u003c\u003e(); List\u003cStudent\u003e fdStudents = new ArrayList\u003c\u003e(); List\u003cSchool\u003e schools = new ArrayList\u003c\u003e(); /** * 初始化数据 */ @Before public void initData() { syStudents.add(new Student(\"1\", \"野原新之助\", \"男\", 5)); syStudents.add(new Student(\"2\", \"风间彻\", \"男\", 5)); syStudents.add(new Student(\"3\", \"樱田妮妮\", \"女\", 4)); syStudents.add(new Student(\"4\", \"佐藤正男\", \"男\", 4)); syStudents.add(new Student(\"5\", \"阿呆\", \"男\", 3)); fdStudents.add(new Student(\"1\", \"图图\", \"男\", 3)); fdStudents.add(new Student(\"2\", \"小美\", \"女\", 3)); fdStudents.add(new Student(\"3\", \"刷子\", \"男\", 4)); fdStudents.add(new Student(\"4\", \"壮壮\", \"男\", 5)); fdStudents.add(new Student(\"5\", \"小豆丁\", \"男\", 1)); schools.add(new School(\"1\", \"双叶幼儿园\", syStudents)); schools.add(new School(\"2\", \"翻斗幼儿园\", fdStudents)); } /** * 展示一个简单的Lambda表达式 */ @Test public void showLambdaAndAnonymousClass() { Runnable anonymousClassRunnable = new Runnable() { @Override public void run() { System.out.println(\"我是一个匿名类内部类对象\"); } }; Runnable lambdaRunnable = () -\u003e System.out.println(\"我是一个lambda表达式\"); new Thread(anonymousClassRunnable).start(); new Thread(lambdaRunnable).start(); } /** * 1. 创建Stream对象 */ @Test public void createStreamObject() { Stream\u003cStudent\u003e studentStream = syStudents.stream(); //创建一个元素为Student的Stream对象 Stream\u003cSchool\u003e schoolsStream = schools.stream(); //创建一个元素为Student的Stream对象 } /** * 2. 过滤 */ @Test public void filter() { // 找到双叶幼稚园中所有年龄大于等于4岁的男孩子 List\u003cStudent\u003e newStudents = syStudents .stream() // 创建一个元素为Student的Stream对象 .filter(student -\u003e \"男\".equals(student.gender)) // 过滤得到所有性别为男的小朋友 .filter(student -\u003e student.age \u003e= 4) // 在上一步过滤的基础上, 再次过滤得到所有年龄大于等于4的小朋友 .collect(Collectors.toList()); // 收集过滤之后的集合 Assert.assertEquals(3, newStudents.size()); } /** * 3. 映射 */ @Test public void map() { // 找到双叶幼稚园中所有小朋友的名字 List\u003cString\u003e newStudents = syStudents .stream() .map(student -\u003e student.name) // 将student对象映射为姓名 .collect(Collectors.toList());// 收集姓名集合 Assert.assertEquals(\"[野原新之助, 风间彻, 樱田妮妮, 佐藤正男, 阿呆]\", newStudents.toString()); // 获得所有幼稚园中的小朋友集合 List\u003cStudent\u003e newStudentsFromAllSchool = schools .stream() .flatMap(school -\u003e school.students.stream()) // 将school对象映射为一个student流, 并将所有的student流合并成一个 .collect(Collectors.toList());// 收集合并后的student集合 Assert.assertEquals(10, newStudentsFromAllSchool.size()); } /** * 4. 去重 */ @Test public void removeDuplicate() { syStudents.add(new Student(\"1\",\"野原新之助的替身\",\"男\", 5)); // 去除双叶幼稚园中重复的小朋友 List\u003cStudent\u003e newStudents = syStudents .stream() .distinct() // 去重, 必须重写equals方法 .collect(Collectors.toList());//收集去重后的集合 Assert.assertEquals(5, newStudents.size()); } /** * 5. 排序 */ @Test public void sort() { // 将双叶幼稚园中所有的小朋友按年龄从小到大顺序重新排序 List\u003cStudent\u003e newStudents = syStudents .stream() .sorted((o1, o2) -\u003e o1.age - o2.age) // 按年龄从小到大排序 .collect(Collectors.toList()); //收集排序后的集合 Assert.assertEquals(3, newStudents.get(0).age); } /** * 6. 查找 */ @Test public void findAndMatch() { // 查找双叶幼稚园中第一个studentId为1的小朋友 Optional\u003cStudent\u003e optionalFirstStudent = syStudents .stream() .filter(student -\u003e Objects.equals(student.studentId, \"1\")) // 过滤得到所有studentId为1的小朋友 .findFirst(); // 在上述过滤的到的集合中找到第一个符合条件的元素 // Optional对象处理 Student firstStudent = optionalFirstStudent.get(); Assert.assertEquals(\"野原新之助\", firstStudent.name); // 查找双叶幼稚园任意一个3岁的小朋友 Optional\u003cStudent\u003e optionalAnyStudent = syStudents .stream() .filter(student -\u003e Objects.equals(student.age, 3)) // 过滤得到所有年龄为3的小朋友 .findAny(); // 在上述过滤的到的集合中找到第一个符合条件的元素 // Optional对象处理 Student anyStudent = optionalAnyStudent.orElse(new Student(null, null, null, 0)); Assert.assertEquals(\"阿呆\", anyStudent.name); // 判断双叶幼稚园中是否所有的小朋友的年龄都小于等于5岁 boolean isAllCorrect = syStudents .stream() .allMatch(student -\u003e student.age \u003c= 5); // 判断是否所有的小朋友的年龄都小于等于5岁 Assert.assertTrue(isAllCorrect); // 判断双叶幼稚园中是否有任意一个的小朋友是女孩子 boolean isAnyCorrect = syStudents .stream() .anyMatch(student -\u003e Objects.equals(student.gender, \"女\")); // 判断任意一个的小朋友的性别为女 Assert.assertTrue(isAnyCorrect); // 判断双叶幼稚园中是否没有一个小朋友的年龄大于5岁 boolean isNoneCorrect = syStudents .stream() .noneMatch(student -\u003e student.age \u003e 5); // 判断是否没有一个小朋友的年龄大于5岁 Assert.assertTrue(isNoneCorrect); } /** * 7. 取值 */ @Test public void evaluation() { // 计算双叶幼稚园中所有的小朋友的最小年龄 int minAge = syStudents .stream() .map(student -\u003e student.age) .min((o1, o2) -\u003e o1 - o2) .get(); Assert.assertEquals(3, minAge); // 计算双叶幼稚园中所有的小朋友的最大年龄 int maxAge = syStudents .stream() .map(student -\u003e student.age) .max((o1, o2) -\u003e o1 - o2) .get(); Assert.assertEquals(5, maxAge); // 计算双叶幼稚园中所有的小朋友的人数 long count = syStudents .stream() .count(); Assert.assertEquals(5, count); } class Student { private String studentId; private String name; private String gender; private int age; public Student(String studentId, String name, String gender, int age) { this.studentId = studentId; this.name = name; this.gender = gender; this.age = age; } @Override public boolean equals(Object o) { if (this == o) return true; if (o == null || getClass() != o.getClass()) return false; Student student = (Student) o; return studentId.equals(student.studentId); } @Override public int hashCode() { return Objects.hash(studentId); } } class School { private String schoolId; private String name; private List\u003cStudent\u003e students; public School(String schoolId, String name, List\u003cStudent\u003e students) { this.schoolId = schoolId; this.name = name; this.students = students; } } } ","wordCount":"5889","inLanguage":"zh","datePublished":"2021-08-21T09:38:30Z","dateModified":"2021-08-21T09:38:30Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://luanrz.github.io/posts/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/java8%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"},"publisher":{"@type":"Organization","name":"luanrz's blog","logo":{"@type":"ImageObject","url":"https://luanrz.github.io/images/icon.jpg"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://luanrz.github.io/ accesskey=h title="luanrz's blog (Alt + H)">luanrz's blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://luanrz.github.io/ title=首页><span>首页</span></a></li><li><a href=https://luanrz.github.io/search/ title="搜索 (Alt + /)" accesskey=/><span>搜索</span></a></li><li><a href=https://luanrz.github.io/archives/ title=归档><span>归档</span></a></li><li><a href=https://luanrz.github.io/categories/ title=分类><span>分类</span></a></li><li><a href=https://luanrz.github.io/tags/ title=标签><span>标签</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Java8函数式编程入门</h1><div class=post-meta><span title='2021-08-21 09:38:30 +0000 UTC'>2021-08-21</span>&nbsp;·&nbsp;12 分钟&nbsp;·&nbsp;5889 字</div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><ul><li><a href=#%e4%b8%80lambda%e8%a1%a8%e8%be%be%e5%bc%8f aria-label=一、Lambda表达式>一、Lambda表达式</a><ul><li><a href=#%e4%b8%80lambda%e8%a1%a8%e8%be%be%e5%bc%8f%e4%b8%8e%e5%8c%bf%e5%90%8d%e5%86%85%e9%83%a8%e7%b1%bb%e5%af%b9%e8%b1%a1 aria-label=（一）Lambda表达式与匿名内部类对象>（一）Lambda表达式与匿名内部类对象</a></li><li><a href=#%e4%ba%8c-%e5%87%bd%e6%95%b0%e6%8e%a5%e5%8f%a3 aria-label="（二） 函数接口">（二） 函数接口</a></li></ul></li><li><a href=#%e4%ba%8cstream aria-label=二、Stream>二、Stream</a><ul><li><a href=#%e4%b8%80stream%e5%b8%b8%e7%94%a8api%e4%b8%80%e8%a7%88 aria-label=（一）Stream常用API一览>（一）Stream常用API一览</a><ul><li><a href=#1-%e4%b8%ad%e9%97%b4%e6%93%8d%e4%bd%9c aria-label="1. 中间操作">1. 中间操作</a></li><li><a href=#2-%e7%bb%88%e6%ad%a2%e6%93%8d%e4%bd%9c aria-label="2. 终止操作">2. 终止操作</a></li></ul></li><li><a href=#%e4%ba%8c%e5%88%9b%e5%bb%bastream%e5%af%b9%e8%b1%a1 aria-label=（二）创建Stream对象>（二）创建Stream对象</a></li><li><a href=#%e4%ba%8c%e8%bf%87%e6%bb%a4 aria-label=（二）过滤>（二）过滤</a></li><li><a href=#%e4%b8%89%e6%98%a0%e5%b0%84 aria-label=（三）映射>（三）映射</a></li><li><a href=#%e5%9b%9b%e5%8e%bb%e9%87%8d aria-label=（四）去重>（四）去重</a></li><li><a href=#%e4%ba%94%e6%8e%92%e5%ba%8f aria-label=（五）排序>（五）排序</a></li><li><a href=#%e5%85%ad%e6%9f%a5%e6%89%be aria-label=（六）查找>（六）查找</a></li><li><a href=#%e4%b8%83%e6%b1%82%e5%80%bc aria-label=（七）求值>（七）求值</a></li></ul></li><li><a href=#%e9%99%84%e5%bd%95 aria-label=附录>附录</a><ul><li><a href=#%e4%bb%a3%e7%a0%81%e5%ae%9e%e4%be%8b aria-label=代码实例>代码实例</a></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement||=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e}),elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h2 id=一lambda表达式>一、Lambda表达式<a hidden class=anchor aria-hidden=true href=#一lambda表达式>#</a></h2><p>什么是Lambda表达式?</p><p>Lambda表达式是一个函数，有入参和出参，它表示一个行为。</p><p>Lambda表达式是一个对象，Java中函数是二等公民，只能依附于类存在，Lambda表达式的目标类型被称之为函数接口。</p><h3 id=一lambda表达式与匿名内部类对象>（一）Lambda表达式与匿名内部类对象<a hidden class=anchor aria-hidden=true href=#一lambda表达式与匿名内部类对象>#</a></h3><p>Lambda表达式和匿名内部类对象很像，在正式介绍Lambda表达式之前，先看看一个匿名内部类对象的例子。</p><p>一般情况下，接口不可以直接实例化，但可以在new接口的过程中重写接口中的方法来创建一个匿名内部类对象。如下所示：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>Runnable anonymousClassesRunnable <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Runnable() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;我是一个匿名类内部类对象&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>有没有更简单的方式呢？请看下述代码：</p><pre tabindex=0><code>Runnable lambdaRunnable = () -&gt; System.out.println(&#34;我是一个lambda表达式&#34;);
</code></pre><p>上述代码中<code>=</code>右侧的<code>() -> System.out.println("我是一个lambda表达式")</code>是一个<code>Lambda表达式</code>。</p><p>这个Lambda表达式由三部分组成：</p><ol><li><code>()</code> : 请求参数，这里为空（对应了上述匿名内部类中run方法的请求参数）</li><li><code>System.out.println("我是一个lambda表达式")</code>: 方法体（对应了上述匿名内部类中run方法的方法体）</li><li><code>-></code> : Lambda表达式标识符，连接左侧的请求参数和右侧的方法体</li></ol><p>可以看到，Lambda表达式与匿名内部类对象完全等价，它们都在<code>=</code>右侧，都可以被赋值给<code>=</code>左侧的接口变量，换言之，<strong>Lambda表达式本质上是一个接口的实例化对象</strong>（在Java中，万物皆对象，lambda表达式也不例外）。那么，任意接口都可以是Lambda表达式的目标类型吗？</p><h3 id=二-函数接口>（二） 函数接口<a hidden class=anchor aria-hidden=true href=#二-函数接口>#</a></h3><p>Lambda表达式只能表示一个行为，这就意味着其对应的接口只能有唯一的方法。同时，为了更精确地标识Lambda表达式的目标接口，通常会给对应的接口加上<code>@FunctionalInterface</code>注解。这种接口叫做函数接口。</p><p><strong>函数接口是Lambda表达式的目标类型</strong>。</p><p>查看一下上述例子中<code>Runnable</code>类的源码，如下所示：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> java.lang;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@FunctionalInterface</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Runnable</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run</span>();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>可以看到，Runnable类有以下特性：</p><ol><li>只有一个方法</li><li>含有@FunctionalInterface注解</li></ol><p>所以，Runnable是一个函数接口。</p><p>jdk的<code>java.util.function</code>包中内置了许多函数接口，常见的如下所示：</p><table><thead><tr><th>接口</th><th>方法</th><th>使用场景</th></tr></thead><tbody><tr><td>Predicate</td><td>boolean test(T t)</td><td>Strem的filter/match系列</td></tr><tr><td>Consumer</td><td>void accept(T t)</td><td>Strem的forEach/peek</td></tr><tr><td>Function&lt;T, R></td><td>R apply(T t)</td><td>Strem的map系列/flatMap系列</td></tr><tr><td>Supplier</td><td>T get()</td><td>Strem的collect/generate</td></tr></tbody></table><h2 id=二stream>二、Stream<a hidden class=anchor aria-hidden=true href=#二stream>#</a></h2><p>Stream基于Lambda表达式，可以对集合进行复杂操作，实现集合的过滤、映射、去重、排序、查找、求值等功能。</p><h3 id=一stream常用api一览>（一）Stream常用API一览<a hidden class=anchor aria-hidden=true href=#一stream常用api一览>#</a></h3><p>一个有效的Stream操作可以由0到n个<strong>中间操作</strong>和1个<strong>终止操作</strong>组成。</p><p>中间操作（intermediate operation）返回Stream对象，可以在Stream操作过程中链式调用。</p><p>终止操作（terminal operation）返回空或特定值，在终止操作之前，任何中间操作都不会执行。</p><h4 id=1-中间操作>1. 中间操作<a hidden class=anchor aria-hidden=true href=#1-中间操作>#</a></h4><table><thead><tr><th>方法</th><th>请求参数类型</th><th>返回类型</th><th>功能</th></tr></thead><tbody><tr><td>filter</td><td>Predicate</td><td>Stream</td><td>过滤</td></tr><tr><td>map</td><td>Function&lt;T,R></td><td>Stream</td><td>映射</td></tr><tr><td>flatMap</td><td>Function&lt;T,R></td><td>Stream</td><td>映射</td></tr><tr><td>distinct</td><td>void</td><td>Stream</td><td>去重</td></tr><tr><td>sorted</td><td>Comparator</td><td>Stream</td><td>排序</td></tr></tbody></table><blockquote><p>其它中间操作：mapToInt、mapToLong、mapToDouble、flatMapToInt、flatMapToLong、flatMapToDouble、peek、limit、skip</p></blockquote><h4 id=2-终止操作>2. 终止操作<a hidden class=anchor aria-hidden=true href=#2-终止操作>#</a></h4><table><thead><tr><th>方法</th><th>请求参数类型</th><th>返回类型</th><th>功能</th></tr></thead><tbody><tr><td>forEach</td><td>Consumer</td><td>void</td><td>循环</td></tr><tr><td>collect</td><td>Collector</td><td>&mldr;</td><td>收集</td></tr><tr><td>findFirst</td><td>void</td><td>Optional</td><td>查找</td></tr><tr><td>findAny</td><td>void</td><td>Optional</td><td>查找</td></tr><tr><td>anyMatch</td><td>Predicate</td><td>boolean</td><td>查找</td></tr><tr><td>allMatch</td><td>Predicate</td><td>boolean</td><td>查找</td></tr><tr><td>noneMatch</td><td>Predicate</td><td>boolean</td><td>查找</td></tr><tr><td>min</td><td>Comparator</td><td>Optional</td><td>求值</td></tr><tr><td>max</td><td>Comparator</td><td>Optional</td><td>求值</td></tr><tr><td>count</td><td>void</td><td>long</td><td>求值</td></tr></tbody></table><blockquote><p>其它终止操作：forEachOrdered、reduce、toArray</p></blockquote><h3 id=二创建stream对象>（二）创建Stream对象<a hidden class=anchor aria-hidden=true href=#二创建stream对象>#</a></h3><p>在正式介绍Stream用法之前，先定义两种类型的列表，后续的所有实例都是基于这两种列表。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Student</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String studentId;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String name;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String gender;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> age;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>School</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String schoolId;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String name;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> List<span style=color:#f92672>&lt;</span>Student<span style=color:#f92672>&gt;</span> students;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>List<span style=color:#f92672>&lt;</span>Student<span style=color:#f92672>&gt;</span> syStudents <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>List<span style=color:#f92672>&lt;</span>Student<span style=color:#f92672>&gt;</span> fdStudents <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>List<span style=color:#f92672>&lt;</span>School<span style=color:#f92672>&gt;</span> schools <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>syStudents.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Student(<span style=color:#e6db74>&#34;1&#34;</span>, <span style=color:#e6db74>&#34;野原新之助&#34;</span>, <span style=color:#e6db74>&#34;男&#34;</span>, 5));
</span></span><span style=display:flex><span>syStudents.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Student(<span style=color:#e6db74>&#34;2&#34;</span>, <span style=color:#e6db74>&#34;风间彻&#34;</span>, <span style=color:#e6db74>&#34;男&#34;</span>, 5));
</span></span><span style=display:flex><span>syStudents.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Student(<span style=color:#e6db74>&#34;3&#34;</span>, <span style=color:#e6db74>&#34;樱田妮妮&#34;</span>, <span style=color:#e6db74>&#34;女&#34;</span>, 4));
</span></span><span style=display:flex><span>syStudents.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Student(<span style=color:#e6db74>&#34;4&#34;</span>, <span style=color:#e6db74>&#34;佐藤正男&#34;</span>, <span style=color:#e6db74>&#34;男&#34;</span>, 4));
</span></span><span style=display:flex><span>syStudents.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Student(<span style=color:#e6db74>&#34;5&#34;</span>, <span style=color:#e6db74>&#34;阿呆&#34;</span>, <span style=color:#e6db74>&#34;男&#34;</span>, 4));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>fdStudents.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Student(<span style=color:#e6db74>&#34;1&#34;</span>, <span style=color:#e6db74>&#34;图图&#34;</span>, <span style=color:#e6db74>&#34;男&#34;</span>, 3));
</span></span><span style=display:flex><span>fdStudents.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Student(<span style=color:#e6db74>&#34;2&#34;</span>, <span style=color:#e6db74>&#34;小美&#34;</span>, <span style=color:#e6db74>&#34;女&#34;</span>, 3));
</span></span><span style=display:flex><span>fdStudents.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Student(<span style=color:#e6db74>&#34;3&#34;</span>, <span style=color:#e6db74>&#34;刷子&#34;</span>, <span style=color:#e6db74>&#34;男&#34;</span>, 4));
</span></span><span style=display:flex><span>fdStudents.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Student(<span style=color:#e6db74>&#34;4&#34;</span>, <span style=color:#e6db74>&#34;壮壮&#34;</span>, <span style=color:#e6db74>&#34;男&#34;</span>, 5));
</span></span><span style=display:flex><span>fdStudents.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Student(<span style=color:#e6db74>&#34;5&#34;</span>, <span style=color:#e6db74>&#34;小豆丁&#34;</span>, <span style=color:#e6db74>&#34;男&#34;</span>, 1));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>schools.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> School(<span style=color:#e6db74>&#34;1&#34;</span>, <span style=color:#e6db74>&#34;双叶幼稚园&#34;</span>, syStudents));
</span></span><span style=display:flex><span>schools.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> School(<span style=color:#e6db74>&#34;2&#34;</span>, <span style=color:#e6db74>&#34;翻斗幼儿园&#34;</span>, fdStudents));
</span></span></code></pre></div><p>创建Stream对象一般使用<code>Collection.stream()</code>方法，如下所示：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>Stream<span style=color:#f92672>&lt;</span>Student<span style=color:#f92672>&gt;</span> studentStream <span style=color:#f92672>=</span> syStudents.<span style=color:#a6e22e>stream</span>(); <span style=color:#75715e>//创建一个元素为Student的Stream对象</span>
</span></span><span style=display:flex><span>Stream<span style=color:#f92672>&lt;</span>School<span style=color:#f92672>&gt;</span> schoolsStream <span style=color:#f92672>=</span> schools.<span style=color:#a6e22e>stream</span>(); <span style=color:#75715e>//创建一个元素为Student的Stream对象</span>
</span></span></code></pre></div><h3 id=二过滤>（二）过滤<a hidden class=anchor aria-hidden=true href=#二过滤>#</a></h3><p>Stream过滤可以使用<code>filter</code>方法，过滤掉集合中符合特定条件的元素。这是一个中间操作，一般配合<code>collect</code>或<code>findFirst</code>等终止操作一起使用。</p><p>filter方法接受一个目标类型为Predicate函数接口的lambda表达式作为请求参数。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// 找到双叶幼稚园中所有年龄大于等于4岁的男孩子</span>
</span></span><span style=display:flex><span>List<span style=color:#f92672>&lt;</span>Student<span style=color:#f92672>&gt;</span> newStudents <span style=color:#f92672>=</span> syStudents
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>stream</span>() <span style=color:#75715e>// 创建一个元素为Student的Stream对象</span>
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>filter</span>(student <span style=color:#f92672>-&gt;</span> <span style=color:#e6db74>&#34;男&#34;</span>.<span style=color:#a6e22e>equals</span>(student.<span style=color:#a6e22e>gender</span>)) <span style=color:#75715e>// 过滤得到所有性别为男的小朋友</span>
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>filter</span>(student <span style=color:#f92672>-&gt;</span> student.<span style=color:#a6e22e>age</span> <span style=color:#f92672>&gt;=</span> 4) <span style=color:#75715e>// 在上一步过滤的基础上, 再次过滤得到所有年龄大于等于4的小朋友</span>
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>collect</span>(Collectors.<span style=color:#a6e22e>toList</span>()); <span style=color:#75715e>// 收集过滤之后的集合</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Assert.<span style=color:#a6e22e>assertEquals</span>(3, newStudents.<span style=color:#a6e22e>size</span>());
</span></span></code></pre></div><h3 id=三映射>（三）映射<a hidden class=anchor aria-hidden=true href=#三映射>#</a></h3><p>Stream映射可以使用<code>map</code>或<code>flatMap</code>方法，将集合中的元素映射为另一个元素。这是一个中间操作，一般配合<code>collect</code>等终止操作一起使用。</p><p>map方法与flatMap方法接受一个目标类型为Function函数接口的lambda表达式作为请求参数。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// 找到双叶幼稚园中所有小朋友的名字</span>
</span></span><span style=display:flex><span>List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> newStudents <span style=color:#f92672>=</span> syStudents
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>stream</span>()
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>map</span>(student <span style=color:#f92672>-&gt;</span> student.<span style=color:#a6e22e>name</span>) <span style=color:#75715e>// 将student对象映射为姓名</span>
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>collect</span>(Collectors.<span style=color:#a6e22e>toList</span>());<span style=color:#75715e>// 收集姓名集合</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Assert.<span style=color:#a6e22e>assertEquals</span>(<span style=color:#e6db74>&#34;[野原新之助, 风间彻, 樱田妮妮, 佐藤正男, 阿呆]&#34;</span>, newStudents.<span style=color:#a6e22e>toString</span>());
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// 获得所有幼稚园中的小朋友集合</span>
</span></span><span style=display:flex><span>List<span style=color:#f92672>&lt;</span>Student<span style=color:#f92672>&gt;</span> newStudentsFromAllSchool <span style=color:#f92672>=</span> schools
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>stream</span>()
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>flatMap</span>(school <span style=color:#f92672>-&gt;</span> school.<span style=color:#a6e22e>students</span>.<span style=color:#a6e22e>stream</span>()) <span style=color:#75715e>// 将school对象映射为一个student流, 并将所有的student流合并成一个</span>
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>collect</span>(Collectors.<span style=color:#a6e22e>toList</span>()); 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Assert.<span style=color:#a6e22e>assertEquals</span>(10, newStudentsFromAllSchool.<span style=color:#a6e22e>size</span>());
</span></span></code></pre></div><h3 id=四去重>（四）去重<a hidden class=anchor aria-hidden=true href=#四去重>#</a></h3><p>Stream去重可以使用<code>distinct</code>方法，去除集合中的重复元素。这是一个中间操作，一般配合<code>collect</code>等终止操作一起使用。</p><p>distinct方法没有请求参数, 只有重写集合元素类的equals方法时, distinct去重才有意义。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>syStudents.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Student(<span style=color:#e6db74>&#34;1&#34;</span>,<span style=color:#e6db74>&#34;蜡笔小新&#34;</span>,<span style=color:#e6db74>&#34;男&#34;</span>, 5));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 去除双叶幼稚园中重复的小朋友</span>
</span></span><span style=display:flex><span>List<span style=color:#f92672>&lt;</span>Student<span style=color:#f92672>&gt;</span> newStudents <span style=color:#f92672>=</span> syStudents
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>stream</span>()
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>distinct</span>() <span style=color:#75715e>// 去重, 必须重写equals方法</span>
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>collect</span>(Collectors.<span style=color:#a6e22e>toList</span>());<span style=color:#75715e>//收集去重后的集合</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Assert.<span style=color:#a6e22e>assertEquals</span>(5, newStudents.<span style=color:#a6e22e>size</span>());
</span></span></code></pre></div><h3 id=五排序>（五）排序<a hidden class=anchor aria-hidden=true href=#五排序>#</a></h3><p>Stream排序可以使用<code>sorted</code>方法，对集合中的元素进行排序。这是一个中间操作，一般配合<code>collect</code>等终止操作一起使用。</p><p>sorted方法可以接受一个目标类型为Comparator函数接口的lambda表达式作为请求参数。sorted方法也有一个无参的重载方法，必须保证集合元素类实现实现Comparable接口，才能调用sorted的无参重载方法否则会抛出ClassCastException异常。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// 将双叶幼稚园中所有的小朋友按年龄从小到大顺序重新排序</span>
</span></span><span style=display:flex><span>List<span style=color:#f92672>&lt;</span>Student<span style=color:#f92672>&gt;</span> newStudents <span style=color:#f92672>=</span> syStudents
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>stream</span>()
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>sorted</span>((o1, o2) <span style=color:#f92672>-&gt;</span>  o1.<span style=color:#a6e22e>age</span> <span style=color:#f92672>-</span> o2.<span style=color:#a6e22e>age</span>) <span style=color:#75715e>// 按年龄从小到大排序</span>
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>collect</span>(Collectors.<span style=color:#a6e22e>toList</span>()); <span style=color:#75715e>//收集排序后的集合</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Assert.<span style=color:#a6e22e>assertEquals</span>(3, newStudents.<span style=color:#a6e22e>get</span>(0).<span style=color:#a6e22e>age</span>);
</span></span></code></pre></div><h3 id=六查找>（六）查找<a hidden class=anchor aria-hidden=true href=#六查找>#</a></h3><p>Stream查找也可以使用<code>findFirst</code>及<code>findAny</code>方法，找到集合中第一个或任意满足特定条件的一个元素。这是一个终止操作，一般配合<code>filter</code>中间操作一起使用。</p><p>find系列方法没有请求参数, 返回一个Optional对象。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// 查找双叶幼稚园中第一个studentId为1的小朋友</span>
</span></span><span style=display:flex><span>Optional<span style=color:#f92672>&lt;</span>Student<span style=color:#f92672>&gt;</span> optionalFirstStudent <span style=color:#f92672>=</span> syStudents
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>stream</span>()
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>filter</span>(student <span style=color:#f92672>-&gt;</span> Objects.<span style=color:#a6e22e>equals</span>(student.<span style=color:#a6e22e>studentId</span>, <span style=color:#e6db74>&#34;1&#34;</span>)) <span style=color:#75715e>// 过滤得到所有studentId为1的小朋友</span>
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>findFirst</span>(); <span style=color:#75715e>// 在上述过滤的到的集合中找到第一个符合条件的元素</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Optional对象处理</span>
</span></span><span style=display:flex><span>Student firstStudent <span style=color:#f92672>=</span> optionalFirstStudent.<span style=color:#a6e22e>get</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Assert.<span style=color:#a6e22e>assertEquals</span>(<span style=color:#e6db74>&#34;野原新之助&#34;</span>, firstStudent.<span style=color:#a6e22e>name</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 查找双叶幼稚园任意一个3岁的小朋友</span>
</span></span><span style=display:flex><span>Optional<span style=color:#f92672>&lt;</span>Student<span style=color:#f92672>&gt;</span> optionalAnyStudent <span style=color:#f92672>=</span> syStudents
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>stream</span>()
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>filter</span>(student <span style=color:#f92672>-&gt;</span> Objects.<span style=color:#a6e22e>equals</span>(student.<span style=color:#a6e22e>age</span>, 3)) <span style=color:#75715e>// 过滤得到所有年龄为3的小朋友</span>
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>findAny</span>(); <span style=color:#75715e>// 在上述过滤的到的集合中找到第一个符合条件的元素</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Optional对象处理</span>
</span></span><span style=display:flex><span>Student anyStudent <span style=color:#f92672>=</span> optionalAnyStudent.<span style=color:#a6e22e>orElse</span>(<span style=color:#66d9ef>new</span> Student(<span style=color:#66d9ef>null</span>, <span style=color:#66d9ef>null</span>, <span style=color:#66d9ef>null</span>, 0));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Assert.<span style=color:#a6e22e>assertEquals</span>(<span style=color:#e6db74>&#34;阿呆&#34;</span>, anyStudent.<span style=color:#a6e22e>name</span>);
</span></span></code></pre></div><p>Stream查找使用<code>anyMatch</code>、<code>allMatch</code>及<code>noneMatch</code>方法，判断集合中的元素是否满足特定条件。这是一个终止操作。</p><p>match系列方法接受一个目标类型为Predicate函数接口的lambda表达式作为请求参数。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// 判断双叶幼稚园中是否所有的小朋友的年龄都小于等于5岁</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>boolean</span> isAllCorrect <span style=color:#f92672>=</span> syStudents
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>stream</span>()
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>allMatch</span>(student <span style=color:#f92672>-&gt;</span> student.<span style=color:#a6e22e>age</span> <span style=color:#f92672>&lt;=</span> 5); <span style=color:#75715e>// 判断是否所有的小朋友的年龄都小于等于5岁</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Assert.<span style=color:#a6e22e>assertTrue</span>(isAllCorrect);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 判断双叶幼稚园中是否有任意一个的小朋友是女孩子</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>boolean</span> isAnyCorrect <span style=color:#f92672>=</span> syStudents
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>stream</span>()
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>anyMatch</span>(student <span style=color:#f92672>-&gt;</span> Objects.<span style=color:#a6e22e>equals</span>(student.<span style=color:#a6e22e>gender</span>, <span style=color:#e6db74>&#34;女&#34;</span>)); <span style=color:#75715e>// 判断有任意一个的小朋友的性别为女</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Assert.<span style=color:#a6e22e>assertTrue</span>(isAnyCorrect);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 判断双叶幼稚园中是否没有一个小朋友的年龄大于5岁</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>boolean</span> isNoneCorrect <span style=color:#f92672>=</span> syStudents
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>stream</span>()
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>noneMatch</span>(student <span style=color:#f92672>-&gt;</span> student.<span style=color:#a6e22e>age</span> <span style=color:#f92672>&gt;</span> 5); <span style=color:#75715e>// 判断是否没有一个小朋友的年龄大于5岁</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Assert.<span style=color:#a6e22e>assertTrue</span>(isNoneCorrect);
</span></span></code></pre></div><h3 id=七求值>（七）求值<a hidden class=anchor aria-hidden=true href=#七求值>#</a></h3><p>Stream排序可以使用<code>min</code>、<code>max</code>及<code>count</code>等方法，求得集合的最小值、最大值及元素个数等值。这是一个终止操作。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// 计算双叶幼稚园中所有的小朋友的最小年龄</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> minAge <span style=color:#f92672>=</span> syStudents
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>stream</span>()
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>map</span>(student <span style=color:#f92672>-&gt;</span> student.<span style=color:#a6e22e>age</span>)
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>min</span>((o1, o2) <span style=color:#f92672>-&gt;</span>  o1 <span style=color:#f92672>-</span> o2)
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>get</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 计算双叶幼稚园中所有的小朋友的最大年龄</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> maxAge <span style=color:#f92672>=</span> syStudents
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>stream</span>()
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>map</span>(student <span style=color:#f92672>-&gt;</span> student.<span style=color:#a6e22e>age</span>)
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>max</span>((o1, o2) <span style=color:#f92672>-&gt;</span>  o1 <span style=color:#f92672>-</span> o2)
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>get</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 计算双叶幼稚园中所有的小朋友的人数</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>long</span> count <span style=color:#f92672>=</span> syStudents
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>stream</span>()
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>count</span>();
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>Assert.<span style=color:#a6e22e>assertEquals</span>(3, minAge);
</span></span><span style=display:flex><span>Assert.<span style=color:#a6e22e>assertEquals</span>(5, maxAge);
</span></span><span style=display:flex><span>Assert.<span style=color:#a6e22e>assertEquals</span>(5, count);
</span></span></code></pre></div><h2 id=附录>附录<a hidden class=anchor aria-hidden=true href=#附录>#</a></h2><h3 id=代码实例>代码实例<a hidden class=anchor aria-hidden=true href=#代码实例>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import</span> org.junit.Assert;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.junit.Before;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.junit.Test;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.ArrayList;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.List;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Objects;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Optional;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.stream.Collectors;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.stream.Stream;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>LambdaDemo</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    List<span style=color:#f92672>&lt;</span>Student<span style=color:#f92672>&gt;</span> syStudents <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>    List<span style=color:#f92672>&lt;</span>Student<span style=color:#f92672>&gt;</span> fdStudents <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>    List<span style=color:#f92672>&lt;</span>School<span style=color:#f92672>&gt;</span> schools <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * 初始化数据
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Before</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>initData</span>() {
</span></span><span style=display:flex><span>        syStudents.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Student(<span style=color:#e6db74>&#34;1&#34;</span>, <span style=color:#e6db74>&#34;野原新之助&#34;</span>, <span style=color:#e6db74>&#34;男&#34;</span>, 5));
</span></span><span style=display:flex><span>        syStudents.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Student(<span style=color:#e6db74>&#34;2&#34;</span>, <span style=color:#e6db74>&#34;风间彻&#34;</span>, <span style=color:#e6db74>&#34;男&#34;</span>, 5));
</span></span><span style=display:flex><span>        syStudents.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Student(<span style=color:#e6db74>&#34;3&#34;</span>, <span style=color:#e6db74>&#34;樱田妮妮&#34;</span>, <span style=color:#e6db74>&#34;女&#34;</span>, 4));
</span></span><span style=display:flex><span>        syStudents.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Student(<span style=color:#e6db74>&#34;4&#34;</span>, <span style=color:#e6db74>&#34;佐藤正男&#34;</span>, <span style=color:#e6db74>&#34;男&#34;</span>, 4));
</span></span><span style=display:flex><span>        syStudents.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Student(<span style=color:#e6db74>&#34;5&#34;</span>, <span style=color:#e6db74>&#34;阿呆&#34;</span>, <span style=color:#e6db74>&#34;男&#34;</span>, 3));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        fdStudents.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Student(<span style=color:#e6db74>&#34;1&#34;</span>, <span style=color:#e6db74>&#34;图图&#34;</span>, <span style=color:#e6db74>&#34;男&#34;</span>, 3));
</span></span><span style=display:flex><span>        fdStudents.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Student(<span style=color:#e6db74>&#34;2&#34;</span>, <span style=color:#e6db74>&#34;小美&#34;</span>, <span style=color:#e6db74>&#34;女&#34;</span>, 3));
</span></span><span style=display:flex><span>        fdStudents.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Student(<span style=color:#e6db74>&#34;3&#34;</span>, <span style=color:#e6db74>&#34;刷子&#34;</span>, <span style=color:#e6db74>&#34;男&#34;</span>, 4));
</span></span><span style=display:flex><span>        fdStudents.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Student(<span style=color:#e6db74>&#34;4&#34;</span>, <span style=color:#e6db74>&#34;壮壮&#34;</span>, <span style=color:#e6db74>&#34;男&#34;</span>, 5));
</span></span><span style=display:flex><span>        fdStudents.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Student(<span style=color:#e6db74>&#34;5&#34;</span>, <span style=color:#e6db74>&#34;小豆丁&#34;</span>, <span style=color:#e6db74>&#34;男&#34;</span>, 1));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        schools.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> School(<span style=color:#e6db74>&#34;1&#34;</span>, <span style=color:#e6db74>&#34;双叶幼儿园&#34;</span>, syStudents));
</span></span><span style=display:flex><span>        schools.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> School(<span style=color:#e6db74>&#34;2&#34;</span>, <span style=color:#e6db74>&#34;翻斗幼儿园&#34;</span>, fdStudents));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * 展示一个简单的Lambda表达式
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>showLambdaAndAnonymousClass</span>() {
</span></span><span style=display:flex><span>        Runnable anonymousClassRunnable <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Runnable() {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run</span>() {
</span></span><span style=display:flex><span>                System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;我是一个匿名类内部类对象&#34;</span>);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Runnable lambdaRunnable <span style=color:#f92672>=</span> () <span style=color:#f92672>-&gt;</span> System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;我是一个lambda表达式&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>new</span> Thread(anonymousClassRunnable).<span style=color:#a6e22e>start</span>();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>new</span> Thread(lambdaRunnable).<span style=color:#a6e22e>start</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * 1. 创建Stream对象
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>createStreamObject</span>() {
</span></span><span style=display:flex><span>        Stream<span style=color:#f92672>&lt;</span>Student<span style=color:#f92672>&gt;</span> studentStream <span style=color:#f92672>=</span> syStudents.<span style=color:#a6e22e>stream</span>(); <span style=color:#75715e>//创建一个元素为Student的Stream对象</span>
</span></span><span style=display:flex><span>        Stream<span style=color:#f92672>&lt;</span>School<span style=color:#f92672>&gt;</span> schoolsStream <span style=color:#f92672>=</span> schools.<span style=color:#a6e22e>stream</span>(); <span style=color:#75715e>//创建一个元素为Student的Stream对象</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * 2. 过滤
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>filter</span>() {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 找到双叶幼稚园中所有年龄大于等于4岁的男孩子</span>
</span></span><span style=display:flex><span>        List<span style=color:#f92672>&lt;</span>Student<span style=color:#f92672>&gt;</span> newStudents <span style=color:#f92672>=</span> syStudents
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>stream</span>() <span style=color:#75715e>// 创建一个元素为Student的Stream对象</span>
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>filter</span>(student <span style=color:#f92672>-&gt;</span> <span style=color:#e6db74>&#34;男&#34;</span>.<span style=color:#a6e22e>equals</span>(student.<span style=color:#a6e22e>gender</span>)) <span style=color:#75715e>// 过滤得到所有性别为男的小朋友</span>
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>filter</span>(student <span style=color:#f92672>-&gt;</span> student.<span style=color:#a6e22e>age</span> <span style=color:#f92672>&gt;=</span> 4) <span style=color:#75715e>// 在上一步过滤的基础上, 再次过滤得到所有年龄大于等于4的小朋友</span>
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>collect</span>(Collectors.<span style=color:#a6e22e>toList</span>()); <span style=color:#75715e>// 收集过滤之后的集合</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Assert.<span style=color:#a6e22e>assertEquals</span>(3, newStudents.<span style=color:#a6e22e>size</span>());
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * 3. 映射
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>map</span>() {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 找到双叶幼稚园中所有小朋友的名字</span>
</span></span><span style=display:flex><span>        List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> newStudents <span style=color:#f92672>=</span> syStudents
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>stream</span>()
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>map</span>(student <span style=color:#f92672>-&gt;</span> student.<span style=color:#a6e22e>name</span>) <span style=color:#75715e>// 将student对象映射为姓名</span>
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>collect</span>(Collectors.<span style=color:#a6e22e>toList</span>());<span style=color:#75715e>// 收集姓名集合</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Assert.<span style=color:#a6e22e>assertEquals</span>(<span style=color:#e6db74>&#34;[野原新之助, 风间彻, 樱田妮妮, 佐藤正男, 阿呆]&#34;</span>, newStudents.<span style=color:#a6e22e>toString</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 获得所有幼稚园中的小朋友集合</span>
</span></span><span style=display:flex><span>        List<span style=color:#f92672>&lt;</span>Student<span style=color:#f92672>&gt;</span> newStudentsFromAllSchool <span style=color:#f92672>=</span> schools
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>stream</span>()
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>flatMap</span>(school <span style=color:#f92672>-&gt;</span> school.<span style=color:#a6e22e>students</span>.<span style=color:#a6e22e>stream</span>()) <span style=color:#75715e>// 将school对象映射为一个student流, 并将所有的student流合并成一个</span>
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>collect</span>(Collectors.<span style=color:#a6e22e>toList</span>());<span style=color:#75715e>// 收集合并后的student集合</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Assert.<span style=color:#a6e22e>assertEquals</span>(10, newStudentsFromAllSchool.<span style=color:#a6e22e>size</span>());
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * 4. 去重
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>removeDuplicate</span>() {
</span></span><span style=display:flex><span>        syStudents.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Student(<span style=color:#e6db74>&#34;1&#34;</span>,<span style=color:#e6db74>&#34;野原新之助的替身&#34;</span>,<span style=color:#e6db74>&#34;男&#34;</span>, 5));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 去除双叶幼稚园中重复的小朋友</span>
</span></span><span style=display:flex><span>        List<span style=color:#f92672>&lt;</span>Student<span style=color:#f92672>&gt;</span> newStudents <span style=color:#f92672>=</span> syStudents
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>stream</span>()
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>distinct</span>() <span style=color:#75715e>// 去重, 必须重写equals方法</span>
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>collect</span>(Collectors.<span style=color:#a6e22e>toList</span>());<span style=color:#75715e>//收集去重后的集合</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Assert.<span style=color:#a6e22e>assertEquals</span>(5, newStudents.<span style=color:#a6e22e>size</span>());
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * 5. 排序
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>sort</span>() {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 将双叶幼稚园中所有的小朋友按年龄从小到大顺序重新排序</span>
</span></span><span style=display:flex><span>        List<span style=color:#f92672>&lt;</span>Student<span style=color:#f92672>&gt;</span> newStudents <span style=color:#f92672>=</span> syStudents
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>stream</span>()
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>sorted</span>((o1, o2) <span style=color:#f92672>-&gt;</span>  o1.<span style=color:#a6e22e>age</span> <span style=color:#f92672>-</span> o2.<span style=color:#a6e22e>age</span>) <span style=color:#75715e>// 按年龄从小到大排序</span>
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>collect</span>(Collectors.<span style=color:#a6e22e>toList</span>()); <span style=color:#75715e>//收集排序后的集合</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Assert.<span style=color:#a6e22e>assertEquals</span>(3, newStudents.<span style=color:#a6e22e>get</span>(0).<span style=color:#a6e22e>age</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * 6. 查找
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>findAndMatch</span>() {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 查找双叶幼稚园中第一个studentId为1的小朋友</span>
</span></span><span style=display:flex><span>        Optional<span style=color:#f92672>&lt;</span>Student<span style=color:#f92672>&gt;</span> optionalFirstStudent <span style=color:#f92672>=</span> syStudents
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>stream</span>()
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>filter</span>(student <span style=color:#f92672>-&gt;</span> Objects.<span style=color:#a6e22e>equals</span>(student.<span style=color:#a6e22e>studentId</span>, <span style=color:#e6db74>&#34;1&#34;</span>)) <span style=color:#75715e>// 过滤得到所有studentId为1的小朋友</span>
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>findFirst</span>(); <span style=color:#75715e>// 在上述过滤的到的集合中找到第一个符合条件的元素</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Optional对象处理</span>
</span></span><span style=display:flex><span>        Student firstStudent <span style=color:#f92672>=</span> optionalFirstStudent.<span style=color:#a6e22e>get</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Assert.<span style=color:#a6e22e>assertEquals</span>(<span style=color:#e6db74>&#34;野原新之助&#34;</span>, firstStudent.<span style=color:#a6e22e>name</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 查找双叶幼稚园任意一个3岁的小朋友</span>
</span></span><span style=display:flex><span>        Optional<span style=color:#f92672>&lt;</span>Student<span style=color:#f92672>&gt;</span> optionalAnyStudent <span style=color:#f92672>=</span> syStudents
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>stream</span>()
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>filter</span>(student <span style=color:#f92672>-&gt;</span> Objects.<span style=color:#a6e22e>equals</span>(student.<span style=color:#a6e22e>age</span>, 3)) <span style=color:#75715e>// 过滤得到所有年龄为3的小朋友</span>
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>findAny</span>(); <span style=color:#75715e>// 在上述过滤的到的集合中找到第一个符合条件的元素</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Optional对象处理</span>
</span></span><span style=display:flex><span>        Student anyStudent <span style=color:#f92672>=</span> optionalAnyStudent.<span style=color:#a6e22e>orElse</span>(<span style=color:#66d9ef>new</span> Student(<span style=color:#66d9ef>null</span>, <span style=color:#66d9ef>null</span>, <span style=color:#66d9ef>null</span>, 0));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Assert.<span style=color:#a6e22e>assertEquals</span>(<span style=color:#e6db74>&#34;阿呆&#34;</span>, anyStudent.<span style=color:#a6e22e>name</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 判断双叶幼稚园中是否所有的小朋友的年龄都小于等于5岁</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>boolean</span> isAllCorrect <span style=color:#f92672>=</span> syStudents
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>stream</span>()
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>allMatch</span>(student <span style=color:#f92672>-&gt;</span> student.<span style=color:#a6e22e>age</span> <span style=color:#f92672>&lt;=</span> 5); <span style=color:#75715e>// 判断是否所有的小朋友的年龄都小于等于5岁</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Assert.<span style=color:#a6e22e>assertTrue</span>(isAllCorrect);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 判断双叶幼稚园中是否有任意一个的小朋友是女孩子</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>boolean</span> isAnyCorrect <span style=color:#f92672>=</span> syStudents
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>stream</span>()
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>anyMatch</span>(student <span style=color:#f92672>-&gt;</span> Objects.<span style=color:#a6e22e>equals</span>(student.<span style=color:#a6e22e>gender</span>, <span style=color:#e6db74>&#34;女&#34;</span>)); <span style=color:#75715e>// 判断任意一个的小朋友的性别为女</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Assert.<span style=color:#a6e22e>assertTrue</span>(isAnyCorrect);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 判断双叶幼稚园中是否没有一个小朋友的年龄大于5岁</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>boolean</span> isNoneCorrect <span style=color:#f92672>=</span> syStudents
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>stream</span>()
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>noneMatch</span>(student <span style=color:#f92672>-&gt;</span> student.<span style=color:#a6e22e>age</span> <span style=color:#f92672>&gt;</span> 5); <span style=color:#75715e>// 判断是否没有一个小朋友的年龄大于5岁</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Assert.<span style=color:#a6e22e>assertTrue</span>(isNoneCorrect);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * 7. 取值
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>evaluation</span>() {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 计算双叶幼稚园中所有的小朋友的最小年龄</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> minAge <span style=color:#f92672>=</span> syStudents
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>stream</span>()
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>map</span>(student <span style=color:#f92672>-&gt;</span> student.<span style=color:#a6e22e>age</span>)
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>min</span>((o1, o2) <span style=color:#f92672>-&gt;</span>  o1 <span style=color:#f92672>-</span> o2)
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>get</span>();
</span></span><span style=display:flex><span>        Assert.<span style=color:#a6e22e>assertEquals</span>(3, minAge);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 计算双叶幼稚园中所有的小朋友的最大年龄</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> maxAge <span style=color:#f92672>=</span> syStudents
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>stream</span>()
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>map</span>(student <span style=color:#f92672>-&gt;</span> student.<span style=color:#a6e22e>age</span>)
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>max</span>((o1, o2) <span style=color:#f92672>-&gt;</span>  o1 <span style=color:#f92672>-</span> o2)
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>get</span>();
</span></span><span style=display:flex><span>        Assert.<span style=color:#a6e22e>assertEquals</span>(5, maxAge);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 计算双叶幼稚园中所有的小朋友的人数</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>long</span> count <span style=color:#f92672>=</span> syStudents
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>stream</span>()
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>count</span>();
</span></span><span style=display:flex><span>        Assert.<span style=color:#a6e22e>assertEquals</span>(5, count);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Student</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> String studentId;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> String name;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> String gender;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> age;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>Student</span>(String studentId, String name, String gender, <span style=color:#66d9ef>int</span> age) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>studentId</span> <span style=color:#f92672>=</span> studentId;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> name;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>gender</span> <span style=color:#f92672>=</span> gender;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>age</span> <span style=color:#f92672>=</span> age;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>equals</span>(Object o) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span> <span style=color:#f92672>==</span> o) <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (o <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>||</span> getClass() <span style=color:#f92672>!=</span> o.<span style=color:#a6e22e>getClass</span>()) <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>            Student student <span style=color:#f92672>=</span> (Student) o;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> studentId.<span style=color:#a6e22e>equals</span>(student.<span style=color:#a6e22e>studentId</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>hashCode</span>() {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> Objects.<span style=color:#a6e22e>hash</span>(studentId);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>School</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> String schoolId;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> String name;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> List<span style=color:#f92672>&lt;</span>Student<span style=color:#f92672>&gt;</span> students;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>School</span>(String schoolId, String name, List<span style=color:#f92672>&lt;</span>Student<span style=color:#f92672>&gt;</span> students) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>schoolId</span> <span style=color:#f92672>=</span> schoolId;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> name;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>students</span> <span style=color:#f92672>=</span> students;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://luanrz.github.io/tags/java/>Java</a></li></ul><nav class=paginav><a class=prev href=https://luanrz.github.io/posts/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/jvm%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98%E5%B7%A5%E5%85%B7%E6%B1%87%E6%80%BB/><span class=title>« 上一页</span><br><span>JVM性能调优工具汇总</span>
</a><a class=next href=https://luanrz.github.io/posts/%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/%E5%B8%B8%E7%94%A8%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8%E9%85%8D%E7%BD%AE/><span class=title>下一页 »</span><br><span>常用包管理器配置</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://luanrz.github.io/>luanrz's blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>